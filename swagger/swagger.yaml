swagger: '2.0'
info:
  description: >-
    SynergyCheck agent API received requests to update from SynergyCheck sensors
    and accumulates them and compresses them to report to the synergyCheck.com
    service
  version: 0.0.1
  title: SynergyCheck agent API
  termsOfService: 'http://swagger.io/terms/'
  contact:
    email: apiteam@synergyCheck.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
host: ___HOST_AND_PORT___
basePath: /api/v1
tags:
  - name: sensor
    description: sensor facing API to receive updates
    externalDocs:
      description: Find out more
      url: 'http://synergyCheck.com/info'
  - name: agent
    description: agent management
schemes:
  - http
paths:
  /ping:
    get:
      tags:
        - agent
      summary: responds with time of day
      description: intended to indicate that agent is up and running
      operationId: ping
      produces:
        - application/json
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Ping'
  /sensor/report:
    post:
      tags:
        - sensor
      summary: new data from sensor
      description: calls with update of data captured by a sensor
      operationId: sensorReport
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: sensor data
          required: true
          schema:
            $ref: '#/definitions/SensorReport'
      responses:
        '405':
          description: Invalid input
  /sensor/start:
    post:
      tags:
        - sensor
      summary: sensor has started up
      description: called when a sensor starts up
      operationId: sensorStart
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: sensor start data
          required: true
          schema:
            $ref: '#/definitions/SensorStart'
      responses:
        '405':
          description: Invalid input
  /sensor/stop:
    post:
      tags:
        - sensor
      summary: sensor has stopped
      description: called when a sensor stops
      operationId: sensorStop
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: sensor stop data
          required: true
          schema:
            $ref: '#/definitions/SensorStop'
      responses:
        '405':
          description: Invalid input
  /sensor/priorReport:
    get:
      tags:
        - sensor
      summary: get prior sent report
      description: server keeps prior report posted
      operationId: sensorPriorReport
      produces:
        - application/json
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/SensorReport'
  /sensor/nextReport:
    get:
      tags:
        - sensor
      summary: get next report
      description: server accumulates report to be posted
      operationId: sensorNextReport
      produces:
        - application/json
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/SensorReport'
securityDefinitions:
  api_key:
    type: apiKey
    name: api_key
    in: header
definitions:
  SensorReport:
    type: object
    properties:
      snapshot:
        type: object
        properties:
          sensorId:
            type: string
          customerId:
            type: string
          timestamp:
            type: string
          transactionId:
            type: string
          duration:
            type: string
          connections:
            type: array
            items:
              $ref: '#/definitions/SensorConnection'
  SensorConnection:
    type: object
    properties:
      connectionId:
        type: integer
        format: int64
      charCount:
        type: integer
        format: int64
      packetCount:
        type: integer
        format: int64
      disconnected:
        type: boolean
  Ping:
    type: object
    properties:
      timestamp:
        type: string
  SensorStart:
    type: object
    properties:
      sensorId:
        type: string
      timestamp:
        type: string
      status:
        type: string
  SensorStop:
    type: object
    properties:
      sensorId:
        type: string
      timestamp:
        type: string
      status:
        type: string
  ApiResponse:
    type: object
    properties:
      status:
        type: string
      errors:
        type: array
        items:
          type: string
      message:
        type: string
externalDocs:
  description: Find out more about Swagger
  url: 'http://swagger.io'
